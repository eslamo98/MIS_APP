<div class="container-fluid py-4">
    <div class="row">
        <div class="col-12">
            <div class="mb-4">
                <h3 class="fw-bold mb-1 text-gradient">{{ t.TITLE[lang()] }}</h3>
                <p class="text-muted">{{ t.SUBTITLE[lang()] }}</p>
            </div>

            <!-- Create / Edit Module Modal -->
            <app-dynamic-form-modal [isOpen]="isModalOpen" [fields]="formFields" [gridSections]="gridConfig"
                [title]="modalTitle" [submitLabel]="submitLabel" (close)="isModalOpen = false"
                (submit)="onModalSubmit($event)">
            </app-dynamic-form-modal>

            <!-- Delete Confirmation Modal -->
            <app-confirmation-modal [isOpen]="isConfirmOpen" [title]="t.CONFIRM_DELETE_TITLE[lang()]"
                [message]="confirmMessage" (confirmed)="onDeleteConfirmed()" (cancelled)="isConfirmOpen = false">
            </app-confirmation-modal>

            <!-- Initialize Permissions Confirmation Modal -->
            <app-confirmation-modal [isOpen]="isInitPermConfirmOpen" [title]="t.CONFIRM_INIT_TITLE[lang()]"
                [message]="initPermConfirmMessage" [confirmLabel]="t.BTN_INIT[lang()]" [confirmIcon]="'shield-alt'"
                [confirmVariant]="'success'" (confirmed)="onInitPermissionsConfirmed()"
                (cancelled)="isInitPermConfirmOpen = false">
            </app-confirmation-modal>

            <app-search-pane [fields]="searchFields" [gridSections]="searchGrid" [moduleName]="Modules.Roles"
                (search)="handleSearch($event)" (reset)="handleReset()" (create)="handleCreate()"
                (exportExcel)="handleExport('excel', $event)" (exportWord)="handleExport('word', $event)"
                (downloadPdf)="handleExport('pdf', $event)">
            </app-search-pane>

            <div class="bg-surface rounded-4 shadow-sm overflow-hidden animate-fade-in mt-4">
                <app-search-results [data]="modules()" [columns]="columns" [moduleName]="Modules.Roles" [isPaged]="true"
                    [pagination]="pagination" [customActions]="tableCustomActions"
                    (customAction)="onCustomAction($event)" (edit)="onEdit($event)" (delete)="onDelete($event)"
                    (pageChange)="onPageChange($event)">
                </app-search-results>
            </div>
        </div>
    </div>
</div>
