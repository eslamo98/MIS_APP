<div class="container-fluid py-4">
  <div class="row">
    <div class="col-12">

      <div class="mb-4 d-flex justify-content-between align-items-center">
        <div>
          <h3 class="fw-bold mb-1 text-gradient">{{ t.TITLE[lang()] }}</h3>
          <p class="text-muted">{{ t.SUBTITLE[lang()] }}</p>
        </div>
      </div>

      <app-dynamic-form-modal
        #formModal
        [isOpen]="isModalOpen"
        [fields]="formFields"
        [gridSections]="gridConfig"
        [title]="modalTitle"
        [submitLabel]="submitLabel"
        (close)="isModalOpen = false"
        (submit)="onModalSubmit($event)">
      </app-dynamic-form-modal>

      <app-confirmation-modal
        [isOpen]="isConfirmOpen"
        [title]="t.CONFIRM_DEACTIVATE_TITLE[lang()]"
        [message]="confirmMessage"
        (confirmed)="onDeactivateConfirmed()"
        (cancelled)="isConfirmOpen = false">
      </app-confirmation-modal>

      <app-search-pane
        [fields]="searchFields"
        [gridSections]="searchGrid"
        [moduleName]="Modules.Users"
        (search)="handleSearch($event)"
        (reset)="handleReset()"
        (create)="onCreate()"
        (exportExcel)="handleExport('excel', $event)"
        (exportWord)="handleExport('word', $event)"
        (downloadPdf)="handleExport('pdf', $event)">
      </app-search-pane>

      <div class="bg-surface rounded-4 shadow-sm overflow-hidden animate-fade-in mt-4">
        <app-search-results
          [data]="users()"
          [columns]="columns"
          [moduleName]="Modules.Users"
          [isPaged]="true"
          [pagination]="pagination"
          (edit)="onEdit($event)"
          (delete)="onDeactivate($event)"
          (pageChange)="onPageChange($event)">
        </app-search-results>
      </div>

    </div>
  </div>
</div>
